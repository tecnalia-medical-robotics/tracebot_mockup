<?xml version="1.0"?>
<launch>

  <arg name="debug" default="false" />
  <arg unless="$(arg debug)" name="launch_prefix" value="" />
  <arg     if="$(arg debug)" name="launch_prefix" value="gdb --ex run --args" />

  <arg name="table_length" default="2.0"/>
  <arg name="table_width" default="2.0"/>
  <arg name="table_height" default="1.0"/>
  <arg name="robot_mount_offset_x" default="0.0"/>
  <arg name="robot_mount_offset_y" default="-0.2"/>
  <arg name="robot_mount_offset_theta" default="0.0"/>
  <arg name="robot_mount_length" default="0.2"/>
  <arg name="robot_mount_width" default="0.2"/>
  <arg name="robot_mount_height" default="0.6"/>
  <arg name="robot_base_tilt" default="0.0"/>
  <arg name="pump_offset_x" default="0.0"/>
  <arg name="pump_offset_y" default="0.2"/>
  <arg name="pump_offset_theta" default="0.0"/>
  <arg name="pump_length" default="0.2"/>
  <arg name="pump_width" default="0.3"/>
  <arg name="pump_height" default="0.4"/>

  <include file="$(find tracebot_mockup_description)/launch/view_tracebot_mockup.launch" pass_all_args="True"/>
  <include file="$(find tracebot_mockup_description)/launch/camera_display.launch"/>

  <group ns="tracebot">

    <rosparam file="$(find tracebot_mockup_simulator)/config/tracebot_mockup_hardware.yaml" />

    <node name="combined_hardware_interface" pkg="ros_control_boilerplate" type="rrbot_combined_hw_main" output="screen" launch-prefix="$(arg launch_prefix)"/>

    <rosparam file="$(find tracebot_mockup_simulator)/config/core_controllers.yaml"/>

    <node name="controller_spawner" pkg="controller_manager" type="controller_manager" args="spawn joint_state_controller" />
    <node name="controller_loader" pkg="controller_manager" type="controller_manager" args="load joint_trajectory_controller left_joint_trajectory_controller right_joint_trajectory_controller" />

  </group>

  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
    <rosparam param="source_list">[/tracebot/joint_states]</rosparam>
  </node>

</launch>
